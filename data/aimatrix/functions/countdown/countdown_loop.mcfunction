#逻辑核心循环
#计时器基础功能
scoreboard players remove clock countdown 1
scoreboard players remove clock match_cd 1

scoreboard players operation clock countdown_equal = clock countdown
scoreboard players operation clock countdown_equal /= clock 20
scoreboard players operation clock countdown_format = clock countdown_equal

#玩家是否在线判定
execute as @a[team=] run scoreboard players set @s player_enter 1
execute as @a if score @s player_enter matches 1 run title @s title "\u00a7k1\u00a7r\u00a7e AiMatrix Demo \u00a7k1 "
execute as @a if score @s player_enter matches 1 run title @s subtitle "\u00a7bBlueCraft \u00a7rVersion"
execute as @a if score @s player_enter matches 1 run team join lobby @s
execute as @a if score @s player_enter matches 1 run gamemode adventure @s
execute as @a if score @s player_enter matches 1 run tp @s 0 1 0 180 0
execute as @a if score @s player_enter matches 1 run clear @s
execute as @a if score @s player_enter matches 1 run effect clear @s
execute as @a if score @s player_enter matches 1 run tag @s remove bombtaker
execute as @a if score @s player_enter matches 1 run tag @s remove red1
execute as @a if score @s player_enter matches 1 run tag @s remove red2
execute as @a if score @s player_enter matches 1 run tag @s remove red3
execute as @a if score @s player_enter matches 1 run tag @s remove red4
execute as @a if score @s player_enter matches 1 run tag @s remove red5
execute as @a if score @s player_enter matches 1 run tag @s remove red6
execute as @a if score @s player_enter matches 1 run tag @s remove red7
execute as @a if score @s player_enter matches 1 run tag @s remove red8
execute as @a if score @s player_enter matches 1 run tag @s remove red9
execute as @a if score @s player_enter matches 1 run tag @s remove red10
execute as @a if score @s player_enter matches 1 run tag @s remove red11
execute as @a if score @s player_enter matches 1 run tag @s remove red12
execute as @a if score @s player_enter matches 1 run tag @s remove red13
execute as @a if score @s player_enter matches 1 run tag @s remove red14
execute as @a if score @s player_enter matches 1 run tag @s remove red15
execute as @a if score @s player_enter matches 1 run tag @s remove blue1
execute as @a if score @s player_enter matches 1 run tag @s remove blue2
execute as @a if score @s player_enter matches 1 run tag @s remove blue3
execute as @a if score @s player_enter matches 1 run tag @s remove blue4
execute as @a if score @s player_enter matches 1 run tag @s remove blue5
execute as @a if score @s player_enter matches 1 run tag @s remove blue6
execute as @a if score @s player_enter matches 1 run tag @s remove blue7
execute as @a if score @s player_enter matches 1 run tag @s remove blue8
execute as @a if score @s player_enter matches 1 run tag @s remove blue9
execute as @a if score @s player_enter matches 1 run tag @s remove blue10
execute as @a if score @s player_enter matches 1 run tag @s remove blue11
execute as @a if score @s player_enter matches 1 run tag @s remove blue12
execute as @a if score @s player_enter matches 1 run tag @s remove blue13
execute as @a if score @s player_enter matches 1 run tag @s remove blue14
execute as @a if score @s player_enter matches 1 run tag @s remove blue15
execute as @a if score @s player_enter matches 1 run tag @s remove dead
execute as @a if score @s player_enter matches 1 run tag @s remove mvp
execute as @a if score @s player_enter matches 1 run scoreboard players set @s inside_bombsite 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s kills 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s kill 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s death 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s deaths 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s killstreak 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s abilitycharge 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s streak_reward_use1 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s streak_reward_use2 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s streak_reward_use3 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s damage_taken_2 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s damage_taken 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s player_status 0
execute as @a if score @s player_enter matches 1 run xp set @s 0 levels
execute as @a if score @s player_enter matches 1 run xp set @s 0 points
execute as @a if score @s player_enter matches 1 run effect give @s instant_health 1 8 true
execute as @a if score @s player_enter matches 1 run scoreboard players set @s nogun_ok 0
execute as @a if score @s player_enter matches 1 run scoreboard players set @s nogun_no 0
execute as @a if score @s player_enter matches 1 run effect clear @s speed
execute as @a if score @s player_enter matches 1 run scoreboard players set @s hurt 0
execute as @a if score @s player_enter matches 1 run scoreboard players reset @s hurt_1
execute as @a if score @s player_enter matches 1 run scoreboard players reset @s hurt_2
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[AiMatrix] \u00a7i若被地形卡住，使用/trigger killself来返回重生点。"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7i枪械分发失败可以使用/trigger nogun强制分发，"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7i上述指令使用后会提醒全房玩家，请勿滥用！"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] "
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7i现只能够使用指令在局内选择枪械装备。"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7ie.g. 长枪/trigger rifle1"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7ie.g. 手枪/trigger pistol1"
execute as @a if score @s player_enter matches 1 run tellraw @s "\u00a77[A.M.T] \u00a7i指令有可能无效的bug实在太难修了，咕咕咕咕"
execute as @a run scoreboard players set @s player_enter 0



#玩家人数计算
execute as @a run scoreboard players set @s RedTeamCount 1
execute as @r run scoreboard players set clock player_count 0
execute as @a run scoreboard players operation clock player_count += @s RedTeamCount

execute as @r run scoreboard players operation clock countdown_minute = clock countdown
execute as @r run scoreboard players operation clock countdown_second = clock countdown
execute as @r run scoreboard players operation clock countdown_minute /= clock 1200
execute as @r run scoreboard players operation clock countdown_second %= clock 1200
execute as @r run scoreboard players operation clock countdown_second /= clock 20
execute as @a if score clock countdown matches 0..72000 if score clock ingame matches 1 if score clock countdown_second matches 10..60 if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 4 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color":"white"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color": "red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color": "blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}
execute as @a if score clock countdown matches 0..72000 if score clock ingame matches 1 if score clock countdown_second matches 0..9 if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 4 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color": "white"},{"text": "0","color":"yellow"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color":"red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color":"blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}


execute as @a if score clock countdown matches 0..72000 if score clock ui_enable matches 1 if score clock ingame matches 1 if score clock countdown_second matches 10..60 if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 1 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color":"white"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color": "red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color": "blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}
execute as @a if score clock countdown matches 0..72000 if score clock ui_enable matches 1 if score clock ingame matches 1 if score clock countdown_second matches 0..9 if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 1 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color": "white"},{"text": "0","color":"yellow"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color":"red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color":"blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}
execute as @a if score clock countdown matches 0..72000 if score clock ui_enable matches 1 if score clock ingame matches 1 if score clock countdown_second matches 10..60 if score map_number_recorder mode matches 1 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color":"white"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color": "red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color": "blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}
execute as @a if score clock countdown matches 0..72000 if score clock ui_enable matches 1 if score clock ingame matches 1 if score clock countdown_second matches 0..9 if score map_number_recorder mode matches 1 run title @s actionbar {"text":"KD:","color":"aqua","extra":[{"score": {"name": "@s","objective": "kills"}},{"text": "/"},{"score": {"name":"@s","objective":"deaths"}},{"text":"   回合时间："},{"score":{"name":"clock","objective":"countdown_minute"},"color":"yellow"},{"text": ":","color": "white"},{"text": "0","color":"yellow"},{"score": {"name": "clock","objective": "countdown_second"},"color":"yellow"},{"text": "  存活成员："},{"score": {"name": "clock","objective": "RedTeamLeft"},"color":"red"},{"text": "-"},{"score": {"name": "clock","objective": "BlueTeamLeft"},"color":"blue"},{"text": "   比分："},{"score": {"name": "clock","objective": "red_score"}},{"text": ":"},{"score": {"name": "clock","objective": "blue_score"}}]}

execute as @a if score clock ingame matches 1 if score clock ui_enable matches 1 if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 3 run title @s actionbar {"text": "KD","color": "aqua","extra": [{"text": ":","color": "aqua"},{"score": {"name": "@s","objective": "kills"},"color": "white"},{"text": "/","color": "white"},{"score": {"name": "@s","objective": "deaths"},"color": "white"},{"text": "   伤害: ","color": "aqua"},{"score": {"name": "@s","objective": "damage_dealt"},"color": "white"},{"text": "   比分: ","color": "aqua"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "white"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": "  连杀: ","color": "aqua"},{"score": {"name": "@s","objective": "killstreak"},"color": "white"}]}
execute as @a if score clock ingame matches 1 if score clock ui_enable matches 1 if score map_number_recorder mode matches 3 run title @s actionbar {"text": "KD","color": "aqua","extra": [{"text": ":","color": "aqua"},{"score": {"name": "@s","objective": "kills"},"color": "white"},{"text": "/","color": "white"},{"score": {"name": "@s","objective": "deaths"},"color": "white"},{"text": "   伤害: ","color": "aqua"},{"score": {"name": "@s","objective": "damage_dealt"},"color": "white"},{"text": "   比分: ","color": "aqua"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "white"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": "  连杀: ","color": "aqua"},{"score": {"name": "@s","objective": "killstreak"},"color": "white"}]}



execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 0 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "white"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 0 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "white"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 0 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "white"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "red"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "red"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches 1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "red"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches -1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "blue"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches -1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "blue"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 1 if score clock Bsector_status matches -1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "red"},{"text": "B ","color": "blue"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}

execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 0 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "white"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 0 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "white"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 0 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "white"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "red"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "red"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches 1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "red"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches -1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "blue"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches -1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "blue"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches 0 if score clock Bsector_status matches -1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "white"},{"text": "B ","color": "blue"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}

execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 0 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "white"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 0 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "white"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 0 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "white"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "red"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "red"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches 1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "red"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches -1 if score clock Csector_status matches 0 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "blue"},{"text": "C  ","color": "white"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches -1 if score clock Csector_status matches 1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "blue"},{"text": "C  ","color": "red"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}
execute as @a if score map_number_recorder mode matches 6 if score map_number_recorder map_number matches 2 if score clock ui_enable matches 1 if score clock Asector_status matches -1 if score clock Bsector_status matches -1 if score clock Csector_status matches -1 if score clock sector_ready matches 1 run title @s actionbar {"text":"  KD","color":"white","extra":[{"text": ":","color": "white"},{"score": {"name": "@s","objective": "kills"}},{"text": "/","color": "yellow"},{"score": {"name":"@s","objective":"deaths"}},{"text": "   A ","color": "blue"},{"text": "B ","color": "blue"},{"text": "C  ","color": "blue"},{"text": " 比分","color": "white"},{"text": ":","color": "white"},{"score": {"name": "clock","objective": "red_score"},"color": "red"},{"text": "-","color": "yellow"},{"score": {"name": "clock","objective": "blue_score"},"color": "blue"},{"text": ""}]}


# 呼吸回血检测
execute as @a if score @s hurt matches 1.. run scoreboard players set @s hurt_1 1
execute as @a if score @s hurt matches 0 run scoreboard players set @s hurt_1 2
execute as @a if score @s hurt_1 matches 1 run scoreboard players set @s hurt_2 0
execute as @a if score @s health matches 20 run scoreboard players set @s hurt_2 0
execute as @a if score @s hurt_1 matches 2 run scoreboard players add @s hurt_2 1
execute as @a if score @s hurt_2 matches 140.. run effect give @s regeneration 5 6 true
execute as @a at @s if score @s hurt_2 matches 140 run playsound minecraft:block.brewing_stand.brew master @s
execute as @a if score @s hurt_2 matches 0..20 run effect clear @s regeneration

execute as @a run scoreboard players set @s hurt 0

# 服装patch
item replace entity @a[team=Red] armor.head with air
item replace entity @a[team=Blue] armor.head with air

kill @e[type=item,nbt={Item:{id:"tacz:modern_kinetic_gun"}}]
kill @e[type=item,nbt={Item:{id:"tacz:attachment"}}]
kill @e[type=item,nbt={Item:{id:"minecraft:shears"}}]
kill @e[type=experience_orb]

clear @a[team=Red] shears 1

#血量修改
execute as @a run attribute @s minecraft:generic.max_health base set 100

schedule function aimatrix:countdown/countdown_loop 1t append 